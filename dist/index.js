"use strict";function isNum(t){return"number"==typeof t}Object.defineProperty(exports,"__esModule",{value:!0});let log10=Math.log10?t=>Math.log10(t):t=>{let e=Math.log(t)*Math.LOG10E,r=Math.round(e);return t===Math.pow(10,r)?r:e};function intExponent(t){return Math.floor(log10(t))}class StatB{static sum(t,e){switch(t.length){case 0:return NaN;case 1:return e(t[0]);default:let r=0;for(let n=0;n<t.length;n++)r+=e(t[n]);return r}}static max(t,e){switch(t.length){case 0:return NaN;case 1:return e(t[0]);default:let r,n=e(t[0]);for(let o=1;o<t.length;o++)(r=e(t[o]))>n&&(n=r);return n}}}const rn="\r\n",tb="  ",aeu="(Ã˜)",noop=()=>{};Array.prototype.last=function(){return this[this.length-1]},Array.prototype.take=function(t){let e=new Array(t);if(t>0&&t<this.length)for(let r=0;r<t;r++)e[r]=this[r];else e=this;return e},Array.prototype.hBrief=function(t=", ",e=(t=>t),r=0){switch(!0){case 0===this.length:return aeu;case r>=1&&r<=this.length-3:return this.take(r).map(e).join(t)+"..."+this.last();default:return this.map(e).join(t)}},Array.prototype.vBrief=function(t=(t=>t),e=0){switch(!0){case 0===this.length:return aeu;case e>=1&&e<=this.length-3:return[...this.take(e).tagsIndexed(t)," ."," ."," .",this.lastTagIndexed(t)].join(rn);default:return this.tagsIndexed(t).join(rn)}},Array.prototype.tagsIndexed=function(t=(t=>t)){const e=intExponent(this.length)+1;return this.map((r,n)=>`[${(n+1).toString().padStart(e)}] ${t(r)}`)},Array.prototype.tagIndexedAt=function(t,e=(t=>t)){return`[${t+1}] ${e(this[t])}`},Array.prototype.lastTagIndexed=function(t=(t=>t)){return this.tagIndexedAt(this.length-1,t)};var extArray=Object.freeze({});Array.prototype.transpose=function(){return Object.keys(this[0]).map(t=>this.map(e=>e[t]))},Array.prototype.vehoCol=function(t){return this.transpose().map(t)},Array.prototype.veho=function(t){return this.map(e=>e.map(t))},Array.prototype.xBrief=function(t=(t=>t),e=(t=>t)){let r=this.map(r=>r.map(r=>isNum(r)?t(r):e(r))),n=r.veho(t=>t.toString().length).vehoCol(t=>Math.max(...t));return"["+r.map(t=>t.map((t,e)=>isNum(t)?t.toString().padStart(n[e]):t.toString().padEnd(n[e])).join(" | ")).map(t=>`[${t}]`).join(",\r\n ")+"]"};var extMatrix=Object.freeze({});Map.prototype.hBrief=function(t=(t=>t),e=0,r=", "){const n=[...this.entries()];switch(!0){case 0===this.length:return aeu;case e>=1&&e<=this.size-3:return n.take(e).map(e=>e.entryBrief(t)).join(r)+"..."+n.last().entryBrief(t);default:return n.map(e=>e.entryBrief(t)).join(r)}},Map.prototype.vBrief=function(t=(t=>t),e=0){const r=Math.max(...[...this.keys()].map(t=>t.toString().length));switch(!0){case 0===this.length:return aeu;case e>=1&&e<=this.size-3:return[...[...this].take(e).map(e=>e.entryBriefPadded(r,t)),...[".",".","."].map(t=>` ${t.padStart(r)}   .`),[...this].last().entryBriefPadded(r,t)].join(rn);default:return[...this.entries()].map(e=>e.entryBriefPadded(r,t)).join(rn)}},Array.prototype.entryBrief=function(t=(t=>t)){return this[0].toString().tag(t(this[1]))},Array.prototype.entryBriefPadded=function(t=0,e=(t=>t)){return this[0].toString().padStart(t).tag(e(this[1]))};var extMap=Object.freeze({});let notUdf=function(t){return void 0!==t},isNumStrBooUdf=function(t){switch(typeof t){case"string":case"number":case"boolean":case"undefined":return!0;default:return!1}};function inferTypo(t){return Object.prototype.toString.call(t)}let inferType=function(t){const e=typeof t;return"object"===e?inferObject(t):e};const rxObj=/^\[object (.*)]$/;let inferObject=function(t){const e=Object.prototype.toString.call(t);return rxObj.exec(e)[1].toLowerCase()};String.prototype.check=function(t){let e=[["type",`${inferType(t)}`],["(!!)",!!t]].map(t=>`${t[0]}=${t[1]}`).join(" ");return this.tag(e).tag(t)};let writeLine=function(t){console.log(t)};String.prototype.wL=function(){console.log(this)},String.prototype.tag=function(t){const e=this.indexOfFirstNonTab();const r=`${t}`;return`${")"===this.substring(this.length-1)?this:`${this.substring(0,e)}[${this.substring(e)}]`} (${r.includes("\n")?`\r\n${r.split(rn).map(t=>`\t${t}`).join(rn)}\r\n`:r})`},String.prototype.etch=function(t){if("object"===typeof t)switch(!0){case t instanceof Array:case t instanceof Map:this.tag(t.vBrief()).wL();break;case t instanceof Set:this.tag(t.toArray().vBrief()).wL();break;default:this.tag(t).wL()}else this.tag(t).wL()},String.prototype.indexOfFirstNonTab=function(){let t=0;for(;this.startsWith("\t",t)||this.startsWith(" ",t);)t++;return t};let emb=t=>`"${t}"`,deco=function(t){return deNode(t,0)};const tab="  ";let deNode=function(t,e=0){let[r,n]=["\r\n"+tab.repeat(e),""];if("object"!=typeof t)return`${t}`;switch(!0){case t instanceof Array:return`[${n=deList(t,e,r)}]`;case t instanceof Map:return`[${n=deKvps([...t.entries()],e,r)}]`;case t instanceof Set:return`set:[${n=deList([...t],e,r)}]`;case t instanceof Object:return`{${n=deKvps(Object.entries(t),e,r)}}`;default:return`${t}`}},deKvps=function(t,e,r){const n=StatB.max(t,t=>t[0].toString().length),o=t.map(([t,r])=>`${t.toString().padEnd(n," ")}: ${deNode(r,e+1)}`);return o.length>1?`${r}  ${o.join(`,${r+tab}`)}${r}`:o.join(",")},deList=function(t,e,r){const n=t.map(t=>deNode(t,e+1));return StatB.sum(n,t=>t.length)>36?`${r}  ${n.join(`,${r+tab}`)}${r}`:n.join(",")};class Formo{static toPercent(t,e=0){return(100*t).toFixed(e)+"%"}}class MagnitudeFormo{constructor(t=2,e=3){this.fracDigit=t,this.numRegex=new RegExp(`\\d(?=(\\d{${e||3}})+${t>0?"\\.":"$"})`,"g")}format(t){return t.toFixed(this.fracDigit).replace(this.numRegex,"$&,")}}class PercentFormo{constructor(t=0){this.formos=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:t})}format(t){return this.formos.format(t)}}class MoneyFormo{constructor(t){let e=MoneyFormo.getCurrencyConfig(t);this.formos=new Intl.NumberFormat(e.locale,e.options)}format(t){return this.formos.format(t)}static get localeToCurrency(){return new Map([["en-US","USD"],["en-GB","GBP"],["de-DE","EUR"],["es-ES","EUR"],["en-IN","INR"],["zh-CN","CNY"],["ja-JP","JPY"],["ru-RU","RUB"]])}static getCurrencyConfig(t){return{locale:t,options:{style:"currency",currency:MoneyFormo.localeToCurrency.get(t),currencyDisplay:"symbol"}}}}Number.prototype.toPercent=function(t=0){return(100*this).toFixed(t)+"%"},exports.extArray=extArray,exports.extMatrix=extMatrix,exports.extMap=extMap,exports.notUdf=notUdf,exports.isNumStrBooUdf=isNumStrBooUdf,exports.inferType=inferType,exports.inferTypo=inferTypo,exports.inferObject=inferObject,exports.writeLine=writeLine,exports.emb=emb,exports.deco=deco,exports.Formo=Formo,exports.MoneyFormo=MoneyFormo,exports.PercentFormo=PercentFormo,exports.MagnitudeFormo=MagnitudeFormo,exports.rn=rn,exports.tb=tb,exports.aeu=aeu,exports.noop=noop;
